<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>qrcode.js 生成二维码</title>
    <url>/2020/03/09/index/</url>
    <content><![CDATA[<p>目前，扫一扫的应用广泛，越来越多的产品需要我们程序员展示二维码，下面介绍一下怎么生成链接的动态二维码。（总是想着怎么开始第一篇博客）</p>
<h2 id="下载一个插件js-（qrcode-js）"><a href="#下载一个插件js-（qrcode-js）" class="headerlink" title="下载一个插件js （qrcode.js）"></a>下载一个插件js （qrcode.js）</h2><h3 id="页面引入js"><a href="#页面引入js" class="headerlink" title="页面引入js"></a>页面引入js</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/qrcode.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h3 id="同时在页面上设置一个隐藏域，隐藏域的value放上二维码想展示的链接"><a href="#同时在页面上设置一个隐藏域，隐藏域的value放上二维码想展示的链接" class="headerlink" title="同时在页面上设置一个隐藏域，隐藏域的value放上二维码想展示的链接"></a>同时在页面上设置一个隐藏域，隐藏域的value放上二维码想展示的链接</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"url"</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">value</span>=<span class="string">"https://www.baidu.com/"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>这个链接如果很长的话需要先转成短地址，短地址的接口下篇文章再介绍。</p>
<h3 id="需要在js文件中新增一个function，如下"><a href="#需要在js文件中新增一个function，如下" class="headerlink" title="需要在js文件中新增一个function，如下"></a>需要在js文件中新增一个function，如下</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeCode</span> (<span class="params"></span>) </span>&#123;		</span><br><span class="line">	<span class="keyword">var</span> elText = <span class="built_in">document</span>.getElementById(<span class="string">"shareUrl"</span>);</span><br><span class="line">    <span class="keyword">if</span> (!elText.value) &#123;</span><br><span class="line">        alert(<span class="string">"Input a text"</span>);</span><br><span class="line">        elText.focus();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    qrcode.makeCode(elText.value);</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>document.getElementById(“url”)，就是上面隐藏域的id。</p>
<h3 id="页面上写一个div，用来展示二维码"><a href="#页面上写一个div，用来展示二维码" class="headerlink" title="页面上写一个div，用来展示二维码"></a>页面上写一个div，用来展示二维码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"qrbox"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"qrcode"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>插件会生成canvas和img两个标签，自动加到到qrcode中。</p>
<h3 id="最后一步添加页面初始化生成二维码"><a href="#最后一步添加页面初始化生成二维码" class="headerlink" title="最后一步添加页面初始化生成二维码"></a>最后一步添加页面初始化生成二维码</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> qrcode = <span class="keyword">new</span> QRCode(<span class="built_in">document</span>.getElementById(<span class="string">"qrcode"</span>), &#123;</span><br><span class="line">        width: <span class="number">80</span>,</span><br><span class="line">        height: <span class="number">80</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    makeCode();</span><br><span class="line"></span><br><span class="line">    $(<span class="string">"#url"</span>).on(<span class="string">"blur"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        makeCode();</span><br><span class="line">    &#125;).on(<span class="string">"keydown"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (e.keyCode == <span class="number">13</span>) &#123;</span><br><span class="line">            makeCode();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>第一篇</tag>
      </tags>
  </entry>
</search>
